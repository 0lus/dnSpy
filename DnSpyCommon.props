<Project>

  <PropertyGroup>
    <!--
        - appveyor.yml (artifacts)
        - build.ps1
        - dnSpy/dnSpy/app.config (supportedRuntime, .NET Framework only)
    NOTE: Update the ABOVE files when TargetFrameworks is updated -->
    <TargetFrameworks>net472;netcoreapp3.0</TargetFrameworks>
    <IsDotNetFramework>false</IsDotNetFramework>
    <IsDotNetCore>false</IsDotNetCore>
    <IsSelfContainedDotNetCore>false</IsSelfContainedDotNetCore>
    <IsDotNetFramework Condition=" !$(TargetFramework.StartsWith(netcoreapp)) ">true</IsDotNetFramework>
    <IsDotNetCore Condition=" $(TargetFramework.StartsWith(netcoreapp)) ">true</IsDotNetCore>
    <IsSelfContainedDotNetCore Condition=" '$(IsDotNetCore)' == 'true' ">true</IsSelfContainedDotNetCore>
    <Features>strict</Features>
    <LangVersion>latest</LangVersion>
    <NeutralLanguage>en</NeutralLanguage>
    <AppDesignerFolderContentsVisibleOnlyInShowAllFiles>false</AppDesignerFolderContentsVisibleOnlyInShowAllFiles>
    <!-- Make sure we don't have to publish each extension to get all their refs -->
    <CopyLocalLockFileAssemblies Condition=" '$(IsDotNetCore)' == 'true' ">true</CopyLocalLockFileAssemblies>
    <!-- If this gets updated, also update appveyor.yml and build.ps1 -->
    <DnSpyRuntimeIdentifiers>win-x86;win-x64</DnSpyRuntimeIdentifiers>
    <!-- This should only be in the EXE csproj files, but then it fails during publish: https://github.com/dotnet/sdk/issues/2851 -->
    <RuntimeIdentifiers>$(DnSpyRuntimeIdentifiers)</RuntimeIdentifiers>

    <!-- Update app.config whenever this value changes -->
    <DnSpyAssemblyVersion>6.0.2.0</DnSpyAssemblyVersion>
    <!-- This is shown in the title bar -->
    <DnSpyAssemblyInformationalVersion>v6.0.2</DnSpyAssemblyInformationalVersion>
    <DnSpyAssemblyCopyright>Copyright (C) 2014-2019 de4dot@gmail.com</DnSpyAssemblyCopyright>

    <NoWarn>NU1701</NoWarn>

    <!-- Update app.config whenever some of these versions change (eg. dnlib version) -->
    <DnlibVersion>3.1.0</DnlibVersion>
    <DiaSymReaderVersion>1.7.0</DiaSymReaderVersion>
    <IcedVersion>1.1.1</IcedVersion>
    <MSBuildNuGetVersion>15.9.20</MSBuildNuGetVersion>
    <MSVSCompositionNetFxAttributesVersion>15.8.98</MSVSCompositionNetFxAttributesVersion>
    <MSVSCompositionVersion>15.8.98</MSVSCompositionVersion>
    <MSVSIntellisenseVersion>15.5.27130</MSVSIntellisenseVersion>
    <MSVSTextVersion>15.5.27130</MSVSTextVersion>
    <OokiiDialogsVersion>1.0.0</OokiiDialogsVersion>
    <RoslynVersion>2.10.0</RoslynVersion>
  </PropertyGroup>

  <Import Project="$(MSBuildThisFileDirectory)Build\ConvertToNetstandardReferences\ConvertToNetstandardReferences.tasks" Condition=" '$(IsDotNetCore)' == 'true' " />

  <PropertyGroup Condition=" '$(Configuration)' == 'Debug' ">
    <DefineConstants>$(DefineConstants);DEBUG;TRACE</DefineConstants>
  </PropertyGroup>
  <PropertyGroup Condition=" '$(Configuration)' == 'Release' ">
    <DefineConstants>$(DefineConstants);TRACE</DefineConstants>
  </PropertyGroup>

  <!-- .NET Core 3.0 SDK doesn't currently support COMReference: https://github.com/0xd4d/dnSpy/issues/1053 -->
  <PropertyGroup>
    <HasCOMReference>false</HasCOMReference>
    <HasCOMReference Condition=" '$(MSBuildRuntimeType)' != 'Core' ">true</HasCOMReference>
    <DefineConstants Condition=" '$(HasCOMReference)' == 'true' ">$(DefineConstants);HAS_COMREFERENCE</DefineConstants>
  </PropertyGroup>

</Project>
